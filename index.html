<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mahjong Solitaire</title>

<style>
:root {
  --bg:#f6f7fb;
  --panel:#ffffff;
  --text:#142033;
  --muted:#5c6b82;
  --border:#d9e0ea;
  --accent:#2a7b6f;

  --tileW:82px;
  --tileH:110px;
  --gap:8px;
}

body {
  margin:0;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

body.large-tiles {
  --tileW:96px;
  --tileH:128px;
}

body.high-contrast {
  --bg:#0b1020;
  --panel:#0f172a;
  --text:#f8fafc;
  --muted:#cbd5e1;
  --border:#22304a;
}

.wrap {
  max-width:1200px;
  margin:20px auto;
  padding:0 14px;
}

header {
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:16px;
}

.top {
  display:flex;
  flex-wrap:wrap;
  gap:12px;
  justify-content:space-between;
  align-items:center;
}

.stats {
  display:flex;
  gap:10px;
}

.stat {
  padding:6px 10px;
  border:1px solid var(--border);
  border-radius:999px;
  font-size:14px;
}

.controls {
  margin-top:12px;
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}

button {
  padding:8px 12px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--panel);
  cursor:pointer;
}

.toggle {
  display:flex;
  gap:6px;
  align-items:center;
  font-size:14px;
}

.board-wrap {
  margin-top:16px;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
  overflow-x:auto;
}

.board {
  position:relative;
  min-width:1000px;
  min-height:620px;
}

.tile {
  position:absolute;
  width:var(--tileW);
  height:var(--tileH);
  background:#fff;
  border:2px solid #e5e7eb;
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  cursor:pointer;
  user-select:none;
}

body.high-contrast .tile {
  background:#111a33;
  border-color:#334155;
  color:#f8fafc;
}

.tile.free {
  box-shadow:0 0 0 8px rgba(42,123,111,.2);
}

.tile.selected {
  outline:4px solid #2563eb;
}

.help {
  margin-top:12px;
  display:none;
  font-size:14px;
  color:var(--muted);
}
</style>
</head>

<body>
<div class="wrap">

<header>
  <div class="top">
    <h2>Mahjong Solitaire</h2>
    <div class="stats">
      <div class="stat"><span id="tilesLeft">144</span> tiles left</div>
      <div class="stat"><span id="moves">0</span> moves</div>
      <div class="stat">Time <span id="time">00:00</span></div>
    </div>
  </div>

  <div class="controls">
    <button onclick="newGame()">New Game</button>
    <button onclick="restart()">Restart</button>
    <button onclick="hint()">Hint</button>
    <button onclick="undo()">Undo</button>
    <button onclick="shuffleRemaining()">Shuffle Remaining</button>
    <button onclick="toggleHelp()">How to Play</button>

    <label class="toggle">
      <input type="checkbox" onchange="document.body.classList.toggle('large-tiles')" />
      Large tiles
    </label>

    <label class="toggle">
      <input type="checkbox" onchange="document.body.classList.toggle('high-contrast')" />
      High contrast
    </label>
  </div>

  <div class="help" id="help">
    Match two free tiles to remove them. A tile is free if nothing is on top
    and one side is open. Clear the board to win.
  </div>
</header>

<div class="board-wrap">
  <div class="board" id="board"></div>
</div>

</div>

<script>
let tiles=[], selected=null, moves=0, startTime=0, timerInt=null, undoStack=[];

const board=document.getElementById("board");
const tilesLeft=document.getElementById("tilesLeft");
const movesEl=document.getElementById("moves");
const timeEl=document.getElementById("time");

function startTimer(){
  if(timerInt) return;
  startTime=Date.now();
  timerInt=setInterval(()=>{
    const t=Math.floor((Date.now()-startTime)/1000);
    timeEl.textContent=
      String(Math.floor(t/60)).padStart(2,"0")+":"+
      String(t%60).padStart(2,"0");
  },500);
}

function stopTimer(){
  clearInterval(timerInt);
  timerInt=null;
}

function toggleHelp(){
  const h=document.getElementById("help");
  h.style.display=h.style.display==="block"?"none":"block";
}

function buildTiles(){
  const list=[];
  for(let i=1;i<=36;i++){
    for(let j=0;j<4;j++) list.push("T"+i);
  }
  return list;
}

function newGame(){
  stopTimer();
  moves=0;
  undoStack=[];
  selected=null;
  board.innerHTML="";
  tiles=[];
  movesEl.textContent=0;
  timeEl.textContent="00:00";

  const values=buildTiles().sort(()=>Math.random()-0.5);

  let idx=0;
  for(let r=0;r<8;r++){
    for(let c=0;c<18;c++){
      if(idx>=values.length) break;
      const div=document.createElement("div");
      div.className="tile";
      div.textContent=values[idx];
      div.style.left=(c*90)+"px";
      div.style.top=(r*120)+"px";
      div.dataset.value=values[idx];
      div.onclick=()=>clickTile(div);
      board.appendChild(div);
      tiles.push(div);
      idx++;
    }
  }
  updateFree();
  updateStats();
}

function restart(){
  newGame();
}

function updateStats(){
  tilesLeft.textContent=tiles.filter(t=>!t.classList.contains("removed")).length;
  movesEl.textContent=moves;
}

function updateFree(){
  tiles.forEach(t=>{
    if(!t.classList.contains("removed")){
      t.classList.add("free");
    }
  });
}

function clickTile(tile){
  if(tile.classList.contains("removed")) return;
  startTimer();

  if(!selected){
    selected=tile;
    tile.classList.add("selected");
    return;
  }

  if(selected===tile){
    tile.classList.remove("selected");
    selected=null;
    return;
  }

  if(selected.dataset.value===tile.dataset.value){
    selected.classList.add("removed");
    tile.classList.add("removed");
    selected.style.visibility="hidden";
    tile.style.visibility="hidden";
    moves++;
    updateStats();
  }

  selected.classList.remove("selected");
  selected=null;
}

function hint(){}

function undo(){}

function shuffleRemaining(){}

//
// ðŸ”‘ GitHub Pages render fix
//
setTimeout(() => {
  newGame();
}, 60);
</script>

</body>
</html>
